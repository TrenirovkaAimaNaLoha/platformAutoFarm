local Players = game:GetService("Players")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

-- Настройки комнаты
local ROOM_HEIGHT = 13400
local ROOM_SIZE = 80
local WALL_HEIGHT = 520
local floor_THICKNESS = 11 -- толщина пола
local WALL_THICKNESS = 14 -- толщина стен
local ROOM_NAME = "AutoFarmZone"
local TRANSPARENCY = 0.9

-- Создаёт прозрачную комнату в небе
local function createSkyRoom()
	local center = Vector3.new(0, ROOM_HEIGHT, 0)

	-- Пол
	local floor = Instance.new("Part")
	floor.Size = Vector3.new(ROOM_SIZE, floor_THICKNESS, ROOM_SIZE)
	floor.Position = center
	floor.Anchored = true
	floor.BrickColor = BrickColor.new("Bright green")
	floor.Transparency = TRANSPARENCY
	floor.Name = ROOM_NAME
	floor.Parent = workspace

	-- Потолок
	local ceiling = Instance.new("Part")
	ceiling.Size = Vector3.new(ROOM_SIZE, 1, ROOM_SIZE)
	ceiling.Position = center + Vector3.new(0, WALL_HEIGHT, 0)
	ceiling.Anchored = true
	ceiling.BrickColor = BrickColor.new("Bright green")
	ceiling.Transparency = TRANSPARENCY
	ceiling.Name = ROOM_NAME
	ceiling.Parent = workspace

	local wallDistance = ROOM_SIZE / 2
	local walls = {
		Vector3.new(-wallDistance - WALL_THICKNESS / 2, WALL_HEIGHT / 2, 0),   -- Лево
		Vector3.new(wallDistance + WALL_THICKNESS / 2, WALL_HEIGHT / 2, 0),    -- Право
		Vector3.new(0, WALL_HEIGHT / 2, -wallDistance - WALL_THICKNESS / 2),   -- Назад
		Vector3.new(0, WALL_HEIGHT / 2, wallDistance + WALL_THICKNESS / 2),    -- Вперёд
	}

	for _, offset in ipairs(walls) do
		local wall = Instance.new("Part")
		wall.Anchored = true
		wall.BrickColor = BrickColor.new("Really black")
		wall.Transparency = TRANSPARENCY
		wall.Name = ROOM_NAME

		if math.abs(offset.X) > 0 then
			wall.Size = Vector3.new(WALL_THICKNESS, WALL_HEIGHT, ROOM_SIZE)
		else
			wall.Size = Vector3.new(ROOM_SIZE, WALL_HEIGHT, WALL_THICKNESS)
		end

		wall.Position = center + offset
		wall.Parent = workspace
	end

	return center + Vector3.new(0, 5, 0)
end

-- Следит за позицией игрока и возвращает в комнату
local function enforceStay(pos)
	while true do
		task.wait(1)
		if hrp.Position.Y < ROOM_HEIGHT - 10 or hrp.Position.Y > ROOM_HEIGHT + WALL_HEIGHT then
			hrp.CFrame = CFrame.new(pos)
		end
	end
end

-- Создаёт и телепортирует
local function teleportToSkyRoom()
	local pos = createSkyRoom()
	task.wait(0.3)
	hrp.CFrame = CFrame.new(pos)
	task.spawn(function()
		enforceStay(pos)
	end)
end

teleportToSkyRoom()
